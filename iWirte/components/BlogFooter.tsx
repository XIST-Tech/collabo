'use client';

import { useState } from 'react';
import Link from 'next/link';
import Image from 'next/image';
import styles from './BlogFooter.module.css';

export default function BlogFooter() {
  const [email, setEmail] = useState('');
  const [subscribed, setSubscribed] = useState(false);

  const handleSubscribe = async (e: React.FormEvent) => {
    e.preventDefault();
    try {
      const response = await fetch('/api/subscribe', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email }),
      });
      if (response.ok) {
        setEmail('');
        setSubscribed(true);
        setTimeout(() => setSubscribed(false), 5000);
      }
    } catch (error) {
      console.error('Subscription error:', error);
    }
  };

  return (
    <footer className={styles.footer}>
      <div className={styles.container}>
        <div className={styles.brand}>
          <Image 
            src="/image.png" 
            alt="iWrite Logo" 
            width={608} 
            height={250}
            className={styles.brandLogo}
          />
          <p className={styles.brandTagline}>
            Pieces from my keep notesâ€”no rules, just genuine, informal takes on life, work, and everything in between.
          </p>

          <div className={styles.socialIcons}>
            <a href="https://twitter.com" target="_blank" rel="noopener noreferrer" aria-label="Twitter">
              <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M5.50322 11.4794C6.28308 11.4843 7.05615 11.3348 7.77759 11.0395C8.49903 10.7442 9.15448 10.3091 9.70593 9.75932C10.2574 9.20956 10.6939 8.55611 10.99 7.83688C11.2862 7.11765 11.4362 6.34695 11.4313 5.56948V5.29792C11.8355 5.00265 12.1854 4.63981 12.4655 4.22548C12.0848 4.39146 11.682 4.50153 11.2697 4.55228C11.7069 4.29258 12.0349 3.88381 12.1931 3.40159C11.7856 3.64528 11.3389 3.81659 10.8726 3.90789C10.5587 3.57436 10.1432 3.35329 9.69048 3.27888C9.23778 3.20446 8.7731 3.28086 8.36833 3.49625C7.96357 3.71164 7.64129 4.05401 7.45136 4.47038C7.26143 4.88676 7.21444 5.35393 7.31765 5.79962C6.4894 5.75909 5.67899 5.5451 4.93921 5.17158C4.19942 4.79806 3.54684 4.27339 3.02396 3.63173C2.76031 4.08794 2.68039 4.62699 2.8004 5.13973C2.9204 5.65248 3.23137 6.1006 3.67033 6.39337C3.3465 6.38092 3.03018 6.29262 2.74695 6.13562V6.15863C2.74407 6.6354 2.90518 7.09875 3.20342 7.47146C3.50167 7.84416 3.91902 8.10371 4.38594 8.20685C4.08475 8.28761 3.76926 8.30019 3.46257 8.24367C3.59774 8.65027 3.85578 9.00523 4.20129 9.25986C4.5468 9.51449 4.96286 9.65633 5.39242 9.66592C4.65797 10.2553 3.74516 10.5797 2.80235 10.5865C2.63705 10.5817 2.47213 10.5679 2.30835 10.545C3.26264 11.1512 4.37172 11.4707 5.50322 11.4656" fill="black"/>
              </svg>
            </a>
            <a href="https://instagram.com" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
              <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fillRule="evenodd" clipRule="evenodd" d="M5.83179 0.969086C4.51185 0.969086 4.34661 0.9749 3.82807 0.998156C3.31098 1.0219 2.95766 1.10378 2.64858 1.22345C2.32417 1.34498 2.03028 1.53563 1.78741 1.78207C1.54022 2.02421 1.34899 2.3172 1.22707 2.64061C1.10703 2.94875 1.0249 3.30098 1.00108 3.81648C0.97727 4.33344 0.971924 4.49817 0.971924 5.81407C0.971924 7.12997 0.97727 7.2947 1.00108 7.81166C1.0249 8.32717 1.10703 8.6794 1.22707 8.98754C1.349 9.31093 1.54023 9.60392 1.78741 9.84607C2.0303 10.0925 2.32419 10.2831 2.64858 10.4047C2.95766 10.5244 3.31098 10.6062 3.82807 10.63C4.34661 10.6532 4.51185 10.6591 5.83179 10.6591C7.15173 10.6591 7.31696 10.6532 7.83551 10.63C8.3526 10.6062 8.70591 10.5244 9.015 10.4047C9.33939 10.2831 9.63328 10.0925 9.87617 9.84607C10.1234 9.60393 10.3146 9.31094 10.4365 8.98754C10.5565 8.6794 10.6387 8.32717 10.6625 7.81166C10.6858 7.2947 10.6917 7.12997 10.6917 5.81407C10.6917 4.49817 10.6858 4.33344 10.6625 3.81648C10.6387 3.30098 10.5565 2.94875 10.4365 2.64061C10.3146 2.3172 10.1234 2.02421 9.87617 1.78207C9.63329 1.53563 9.3394 1.34498 9.015 1.22345C8.70591 1.10378 8.3526 1.0219 7.83551 0.998156C7.31696 0.9749 7.15173 0.969086 5.83179 0.969086ZM5.83179 1.84215C7.12937 1.84215 7.28294 1.847 7.79517 1.87025C8.2695 1.89206 8.52658 1.97054 8.69813 2.03692C8.9246 2.1251 9.08692 2.23024 9.25702 2.39933C9.42711 2.5689 9.53209 2.73072 9.62054 2.9565C9.68663 3.12753 9.76633 3.38383 9.78771 3.85621C9.81104 4.36736 9.8159 4.51998 9.8159 5.81407C9.8159 7.10768 9.81104 7.26079 9.78771 7.77145C9.76585 8.24432 9.68663 8.50062 9.62054 8.67165C9.54262 8.8821 9.41841 9.07249 9.25702 9.22882C9.08692 9.39839 8.9246 9.50305 8.69813 9.59122C8.52658 9.65712 8.26949 9.73657 7.79566 9.75789C7.28343 9.78115 7.12986 9.78599 5.83179 9.78599C4.5342 9.78599 4.38015 9.78115 3.8684 9.75789C3.39408 9.73609 3.13699 9.65712 2.96544 9.59122C2.75432 9.51358 2.56334 9.38974 2.40656 9.22882C2.24514 9.07251 2.12092 8.88212 2.04304 8.67165C1.97646 8.50062 1.89724 8.24432 1.87586 7.77193C1.85253 7.26079 1.84767 7.10817 1.84767 5.81407C1.84767 4.52046 1.85253 4.36736 1.87586 3.8567C1.89773 3.38383 1.97646 3.12753 2.04304 2.9565C2.13149 2.73072 2.23695 2.5689 2.40656 2.39933C2.57665 2.22975 2.73897 2.1251 2.96544 2.03692C3.13699 1.97054 3.39408 1.89157 3.86792 1.87025C4.38063 1.847 4.53372 1.84215 5.83179 1.84215ZM5.83179 7.42891C5.40219 7.42891 4.99019 7.25877 4.68642 6.95593C4.38265 6.65309 4.21199 6.24235 4.21199 5.81407C4.21199 5.38579 4.38265 4.97505 4.68642 4.67221C4.99019 4.36937 5.40219 4.19924 5.83179 4.19924C6.26138 4.19924 6.67338 4.36937 6.97715 4.67221C7.28092 4.97505 7.45158 5.38579 7.45158 5.81407C7.45158 6.24235 7.28092 6.65309 6.97715 6.95593C6.67338 7.25877 6.26138 7.42891 5.83179 7.42891ZM5.83179 3.32617C5.50407 3.32617 5.17956 3.39052 4.87679 3.51555C4.57401 3.64058 4.29891 3.82384 4.06717 4.05486C3.83544 4.28588 3.65162 4.56015 3.52621 4.86199C3.4008 5.16384 3.33625 5.48736 3.33625 5.81407C3.33625 6.14079 3.4008 6.4643 3.52621 6.76615C3.65162 7.068 3.83544 7.34226 4.06717 7.57328C4.29891 7.80431 4.57401 7.98756 4.87679 8.11259C5.17956 8.23762 5.50407 8.30197 5.83179 8.30197C6.49365 8.30197 7.1284 8.03986 7.5964 7.57328C8.0644 7.10671 8.32733 6.4739 8.32733 5.81407C8.32733 5.15424 8.0644 4.52143 7.5964 4.05486C7.1284 3.58829 6.49365 3.32617 5.83179 3.32617ZM9.00917 3.22782C9.00917 3.30417 8.99408 3.37977 8.96477 3.45031C8.93547 3.52085 8.89251 3.58494 8.83835 3.63893C8.7842 3.69292 8.71991 3.73574 8.64916 3.76496C8.5784 3.79418 8.50257 3.80922 8.42598 3.80922C8.3494 3.80922 8.27356 3.79418 8.20281 3.76496C8.13205 3.73574 8.06776 3.69292 8.01361 3.63893C7.95946 3.58494 7.9165 3.52085 7.88719 3.45031C7.85788 3.37977 7.8428 3.30417 7.8428 3.22782C7.8428 3.07362 7.90424 2.92574 8.01361 2.81671C8.12298 2.70767 8.27131 2.64642 8.42598 2.64642C8.58065 2.64642 8.72899 2.70767 8.83835 2.81671C8.94772 2.92574 9.00917 3.07362 9.00917 3.22782Z" fill="black"/>
              </svg>
            </a>
            <a href="https://linkedin.com" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
              <svg width="13" height="13" viewBox="0 0 13 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M10.0362 1.7366H2.4032C2.03817 1.7366 1.74194 2.02498 1.74194 2.38008V10.0225C1.74194 10.3781 2.03817 10.6669 2.4032 10.6669H10.0362C10.4014 10.6669 10.6996 10.3781 10.6996 10.0225V2.38008C10.6996 2.02498 10.4014 1.7366 10.0362 1.7366ZM4.39865 9.34644H3.06942V5.08484H4.39865V9.34644ZM3.73404 4.50214C3.63286 4.50214 3.53268 4.48226 3.43921 4.44365C3.34574 4.40503 3.26083 4.34844 3.18931 4.27709C3.11779 4.20575 3.06107 4.12105 3.0224 4.02784C2.98373 3.93464 2.96386 3.83475 2.96392 3.73388C2.96392 3.53028 3.04505 3.33501 3.18947 3.19104C3.33388 3.04707 3.52974 2.96619 3.73397 2.96619C3.9382 2.96619 4.13407 3.04707 4.27848 3.19104C4.4229 3.33501 4.50403 3.53028 4.50403 3.73388C4.50403 3.93753 4.42292 4.13284 4.27854 4.2769C4.13416 4.42096 3.93831 4.50197 3.73404 4.50214ZM9.37465 9.34644H8.04754V7.27412C8.04754 6.77973 8.03784 6.14407 7.35693 6.14407C6.66544 6.14407 6.56007 6.68249 6.56007 7.23828V9.34657H5.23196V5.08484H6.50657V5.66679H6.52473C6.70215 5.33191 7.1356 4.97854 7.78205 4.97854C9.12645 4.97854 9.37477 5.8609 9.37477 7.00882V9.34644H9.37465Z" fill="black"/>
              </svg>
            </a>
          </div>
        </div>

        <div className={styles.links}>
          <h4 className={styles.linksTitle}>Quick Links</h4>
          <div className={styles.linksGrid}>
            <Link href="/blog-home" className={styles.link}>Home</Link>
            <Link href="/blog" className={styles.link}>Blog</Link>
          </div>
        </div>

        <div className={styles.newsletter}>
          <h4 className={styles.newsletterTitle}>Newsletter</h4>
          <p className={styles.newsletterSubtitle}>
            Subscribe to my newsleter so you never miss new posts and updates.
          </p>
          <form className={styles.subscribeForm} onSubmit={handleSubscribe}>
            <input
              type="email"
              placeholder="Enter email address"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              className={styles.emailInput}
              required
              disabled={subscribed}
            />
            <button 
              type="submit" 
              className={styles.subscribeBtn}
              disabled={subscribed}
            >
              {subscribed ? 'Subscribed!' : 'Subscribe'}
            </button>
          </form>
        </div>
      </div>

      <div className={styles.divider}></div>

      <div className={styles.copyright}>
        <p>2023 furino. All rights reverved</p>
      </div>
    </footer>
  );
}
